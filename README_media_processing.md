# 🎵 媒体处理类节点说明

本文档详细介绍了ComfyUI XnanTool插件中的媒体处理类节点，这些节点提供了视频和音频处理功能。

## 📋 节点列表

#### 🎞️ 图片转GIF节点 V1 (ImagesToGIFNode V1)
- **位置**: `XnanTool/媒体处理`
- **功能**: 将一系列图片转换为GIF动画（基础版本）
- **输入**: 
  - 最多10张图片输入
  - 帧间隔时间（毫秒）
  - 循环次数
- **输出**: GIF动画文件
- **特点**: 基础版本，不支持过渡效果
- **适用场景**: 制作简单的动画效果

#### 🎞️ 图片转GIF节点 V2 (ImagesToGIFNode V2)
- **位置**: `XnanTool/媒体处理`
- **功能**: 将一系列图片转换为GIF动画（增强版本）
- **输入**: 
  - 最多10张图片输入
  - 帧间隔时间（毫秒）
  - 循环次数
  - 缩放因子（0.1-1.0）
  - 过渡效果（10种类型：无、淡入淡出、滑动、擦除等）
  - 过渡帧数（1-30帧）
  - 优化选项
  - 调色板大小（2-256色）
  - 质量等级（1-5级）
- **输出**: GIF动画文件
- **特点**: 支持多种过渡效果和精细质量控制
- **适用场景**: 制作高质量的动画效果

#### 🎥 视频转GIF节点 (VideoToGIFNode)
- **位置**: `XnanTool/媒体处理`
- **功能**: 将视频文件转换为GIF动画
- **输入**: 
  - 视频文件
  - 持续时间（秒）
  - 帧率
  - 缩放因子（0.1-1.0）
  - 优化选项
  - 调色板大小（2-256色）
  - 质量等级（1-5级）
  - 输出文件名（可选）
- **输出**: GIF动画文件
- **特点**: 支持质量调节和文件大小优化
- **适用场景**: 从视频中提取精彩片段制作GIF

#### 🎵 视频转音频节点 (VideoToAudioNode)
- **位置**: `XnanTool/媒体处理`
- **功能**: 从视频文件中提取音频轨道
- **输入**: 
  - 视频文件
  - 输出格式（MP3/WAV/AAC/FLAC）
  - 音频质量（高/中/低）
  - 自定义文件名（可选）
- **输出**: 音频文件和状态信息
- **特点**: 支持多种音频格式和质量选项
- **适用场景**: 提取视频中的音轨用于其他用途

#### 🎬 视频帧提取节点 (ExtractFrameFromVideoNode)
- **位置**: `XnanTool/媒体处理`
- **功能**: 从单个视频中提取指定帧
- **输入**: 
  - 视频文件
  - 帧提取方式（按帧号或时间戳）
  - 帧号（当选择按帧号提取时）
  - 时间戳（当选择按时间戳提取时）
  - 输出格式（JPG/PNG/BMP）
  - 图片质量（1-100）
- **输出**: 图像张量、保存路径、帧索引和状态信息
- **特点**: 支持精确到帧号或时间戳的提取
- **适用场景**: 视频分析、关键帧提取等任务

#### 📚 批量视频帧提取节点 (BatchExtractFrameFromVideoNode)
- **位置**: `XnanTool/媒体处理`
- **功能**: 从多个视频中批量提取帧
- **输入**: 
  - 文件夹选择模式（输入目录选择或自定义路径）
  - 视频文件过滤（按扩展名）
  - 帧提取方式（按帧号或时间戳）
  - 帧号（当选择按帧号提取时）
  - 时间戳（当选择按时间戳提取时）
  - 输出格式（JPG/PNG/BMP）
  - 图片质量（1-100）
- **输出**: 图像张量、保存路径列表、处理状态汇总
- **特点**: 支持文件夹模式和自定义路径模式，批量处理多个视频
- **适用场景**: 批量视频分析、数据集准备等任务

#### 🎞️ 视频转MP4节点 (VideoToMp4Node)
- **位置**: `XnanTool/媒体处理`
- **功能**: 将视频文件转换为MP4格式，支持质量预设、编码器选择、预设速度、音频设置等高级选项
- **输入**: 
  - 视频路径
  - 起始时间（秒）
  - 持续时间（秒，-1表示整个视频）
  - 帧率（默认25）
  - 视频质量 - 预设质量级别（高质量、中等、低质量、自定义）
  - CRF值 - 恒定速率因子，数值越小质量越高(0-51)，仅在自定义质量时生效
  - 预设速度 - 编码速度预设，越快质量可能越低
  - 编码器 - H.264或H.265/HEVC
  - 音频比特率 - 音频质量设置
  - 音频采样率 - 音频采样率设置（原始、22050Hz、44100Hz、48000Hz、96000Hz）
  - 复制音频 - 是否直接复制原音频流
  - 输出分辨率（原始、预设分辨率或自定义）
  - 自定义宽度（像素）
  - 自定义高度（像素）
  - 输出路径
  - 输出文件名
- **输出**: 输出文件路径、转换信息
- **特点**: 专门用于MP4格式转换，支持高级编码参数，可精确控制转换时间段、质量和输出分辨率
- **适用场景**: 视频格式转换(MP4)、视频压缩、质量调整、分辨率调整等任务